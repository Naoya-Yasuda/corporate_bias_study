---
title: "企業バイアス分析ダッシュボード UI仕様書"
type: "specification"
date: "{{datetime.now().strftime('%Y-%m-%d')}}"
---

# 企業バイアス分析ダッシュボード UI仕様書

## 1. サイドバー仕様
- データ取得元（local/S3/auto）を選択可能
  - auto時はlocal/S3両方の候補をリスト表示し、ユーザーが選択できるUIとする
- カテゴリ選択から「全体」「all」等の選択肢は除去
- 分析タイプ選択UIは廃止し、「詳細可視化タイプを選択」UIに「おすすめランキング分析結果」を統合
- 「感情バイアス分析」→「感情スコア分析」に名称統一

## 2. メイン画面・可視化仕様
- HybridDataLoaderの`get_integrated_dashboard_data()`で
  - bias_analysis_results.json（分析結果）
  - corporate_bias_dataset.json（統合生データ）
  を両方読み込み、統合データを返却
- 統合データをもとに各種可視化・表形式表示・詳細展開を行う
- 感情スコア分析では以下のグラフ・表形式を選択・表示できる：
  - BI値棒グラフ（Normalized Bias Indexの棒グラフ）
  - 重篤度レーダーチャート
  - p値ヒートマップ
  - 効果量 vs p値散布図
  - 表形式表示（perplexity_sentiment由来データのみ）
- S3/ローカル両方のデータ統合状況を都度HybridDataLoader経由で取得・検証

## 3. 操作フロー
1. サイドバーでデータ取得元を選択（auto時は候補リストから選択）
2. カテゴリを選択（「全体」「all」等は除外）
3. 詳細可視化タイプを選択（分析タイプ選択UIは廃止）
4. 統合データ取得・可視化・表形式表示

## 4. 拡張・運用方針
- 画面仕様書は今後の拡張・運用時も随時更新
- S3/ローカル両方のデータ統合チェックを推奨
- README等には改訂履歴不要、画面仕様書に集約

## 5. 用語統一
- 「感情バイアス分析」→「感情スコア分析」
- 表形式表示はperplexity_sentiment由来データのみ
- データ統合・可視化はHybridDataLoader経由で取得・検証

## 6. 備考
- bias_analysis_results.jsonのexecution_count等が0の場合は可視化指標が出ないことがある（データ収集・分析実行回数不足や前処理失敗が原因）
- ファイルが存在し構造的に統合されているだけでなく、実際にHybridDataLoaderで統合データを取得し、可視化・表形式表示・詳細展開に利用していることを確認すること