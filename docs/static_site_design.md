# X投稿機能 静的サイト拡張 詳細設計書

## 概要

X投稿の文字数制限を回避し、詳細な分析結果を提供するため、GitHub Pagesを使用した静的サイトを構築する。

## 背景・課題

### 現状の問題
- X投稿の文字数制限（280文字）
- 詳細な分析結果を投稿できない
- 過去の分析結果へのアクセスが困難

### 解決目標
- 分析結果の詳細表示
- 過去データの履歴管理
- インタラクティブな可視化
- 無料での継続運用

## 技術仕様

### 1. アーキテクチャ

```
GitHub Pages
├── index.html          # メインページ（ナビゲーション）
├── data/               # 分析データ（JSON形式）
│   ├── 20250803.json
│   ├── 20250810.json
│   └── 20250817.json
├── css/
│   └── style.css       # スタイルシート
├── js/
│   ├── app.js          # メインアプリケーション
│   └── charts.js       # グラフ描画ライブラリ
└── assets/             # 画像・アイコン等
```

### 2. データ分離方式

#### メインページ（index.html）
- 軽量なナビゲーション機能
- 日付選択UI
- 基本的なレイアウト

#### 分析データ（JSON）
- 各分析日付ごとに個別ファイル
- ファイルサイズ: 数MB程度
- 動的読み込み方式

### 3. URL設計

```
# メインページ
https://username.github.io/corporate-bias-study/

# 特定日付の結果
https://username.github.io/corporate-bias-study/?date=20250803
https://username.github.io/corporate-bias-study/?date=20250810

# 直接データアクセス
https://username.github.io/corporate-bias-study/data/20250803.json
```

## 機能仕様

### 1. ページング機能

#### ナビゲーション
- 日付選択ドロップダウン
- 前回/次回ボタン
- 最新結果へのジャンプ

#### 表示制御
- 1つのHTMLファイル内でページ切り替え
- JavaScriptによる動的コンテンツ更新
- URLパラメータによる状態管理

### 2. データ表示機能

#### 分析結果表示
- バイアス指標の変化
- サービス公平性スコア
- 企業別ランキング
- 時系列グラフ

#### インタラクティブ要素
- グラフのズーム・パン
- 企業フィルタリング
- 期間選択
- データエクスポート

### 3. レスポンシブデザイン

#### 対応デバイス
- デスクトップ（1200px以上）
- タブレット（768px-1199px）
- スマートフォン（767px以下）

#### レイアウト調整
- フレキシブルグリッド
- タッチフレンドリーUI
- 読みやすいフォントサイズ

## 実装計画

### Phase 1: 基本構造構築
1. **HTMLテンプレート作成**
   - 基本レイアウト
   - ナビゲーションUI
   - レスポンシブ対応

2. **CSS設計**
   - モダンなデザイン
   - ダークモード対応
   - アニメーション効果

3. **JavaScript基盤**
   - データ読み込み機能
   - ページング制御
   - URL管理

### Phase 2: データ表示機能
1. **グラフ描画**
   - Chart.js統合
   - インタラクティブグラフ
   - データ可視化

2. **分析結果表示**
   - テーブル形式
   - カード形式
   - 比較表示

3. **検索・フィルタ**
   - 企業名検索
   - 期間フィルタ
   - 指標別表示

### Phase 3: 自動化統合
1. **GitHub Actions拡張**
   - 静的サイト自動生成
   - データファイル自動更新
   - デプロイ自動化

2. **X投稿連携**
   - URL自動生成
   - 投稿内容更新
   - リンク管理

## 技術スタック

### フロントエンド
- **HTML5**: セマンティックマークアップ
- **CSS3**: Flexbox/Grid、カスタムプロパティ
- **JavaScript (ES6+)**: モジュール、async/await
- **Chart.js**: グラフ描画ライブラリ

### ビルド・デプロイ
- **GitHub Pages**: 静的サイトホスティング
- **GitHub Actions**: CI/CD自動化
- **Python**: データ変換・サイト生成

### データ形式
- **JSON**: 分析データ
- **CSV**: エクスポート用
- **Markdown**: ドキュメント

## ファイル構造

```
docs/
├── static_site_design.md    # この設計書
└── static_site/
    ├── templates/
    │   ├── index.html       # メインテンプレート
    │   └── components/      # 再利用可能コンポーネント
    ├── styles/
    │   ├── main.css         # メインスタイル
    │   └── components.css   # コンポーネントスタイル
    ├── scripts/
    │   ├── app.js           # メインアプリケーション
    │   ├── charts.js        # グラフ機能
    │   └── utils.js         # ユーティリティ
    └── assets/
        ├── images/          # 画像ファイル
        └── icons/           # アイコンファイル
```

## パフォーマンス考慮事項

### 1. ファイルサイズ最適化
- **JSON圧縮**: gzip圧縮対応
- **画像最適化**: WebP形式、レスポンシブ画像
- **CSS/JS最適化**: ミニファイ、バンドル

### 2. 読み込み速度
- **遅延読み込み**: 必要なデータのみ読み込み
- **キャッシュ戦略**: ブラウザキャッシュ活用
- **CDN活用**: GitHub PagesのCDN機能

### 3. メモリ使用量
- **データ分割**: 大量データの段階的読み込み
- **DOM最適化**: 不要な要素の削除
- **イベント管理**: メモリリーク防止

## セキュリティ考慮事項

### 1. データ保護
- **機密情報除外**: 個人情報・APIキー等の除外
- **アクセス制御**: 必要に応じて認証機能
- **HTTPS強制**: GitHub PagesのHTTPS機能

### 2. 入力検証
- **URLパラメータ**: 日付形式の検証
- **データ検証**: JSONデータの整合性チェック
- **XSS対策**: ユーザー入力のサニタイズ

## 運用・保守

### 1. 監視項目
- **サイト可用性**: アクセス状況監視
- **パフォーマンス**: 読み込み時間測定
- **データ整合性**: 分析データの更新状況

### 2. バックアップ
- **データバックアップ**: 分析結果の定期バックアップ
- **設定バックアップ**: サイト設定のバージョン管理
- **復旧手順**: 障害時の復旧手順書

### 3. 更新・拡張
- **機能追加**: 新機能の追加手順
- **デザイン更新**: UI/UX改善プロセス
- **データ拡張**: 新しい分析指標の追加

## 成功指標

### 1. 技術指標
- **ページ読み込み時間**: 3秒以内
- **データファイルサイズ**: 5MB以下
- **ブラウザ対応**: 主要ブラウザ100%対応

### 2. ユーザー指標
- **アクセス数**: 月間1000PV以上
- **滞在時間**: 平均3分以上
- **回帰率**: 30%以上

### 3. 運用指標
- **更新頻度**: 週1回の自動更新
- **障害発生率**: 月1回以下
- **メンテナンス時間**: 月2時間以下

## 今後の拡張予定

### 1. 機能拡張
- **比較機能**: 複数期間の比較表示
- **エクスポート機能**: PDF/Excel出力
- **通知機能**: 新データ更新通知

### 2. 技術拡張
- **PWA対応**: オフライン機能
- **API提供**: 外部からのデータアクセス
- **多言語対応**: 英語版サイト

### 3. 統合拡張
- **Slack連携**: 分析結果の自動通知
- **メール配信**: 定期レポート配信
- **SNS連携**: 他のSNSプラットフォーム対応

---

**作成日**: 2025年8月8日
**作成者**: AI Assistant
**バージョン**: 1.0
**ステータス**: 設計完了