---
title: 企業バイアス分析ダッシュボード「分析サマリー」設計書
date: {dynamic_date}
type: "rule"
alwaysApply: true
globs: ["**/*"]
---

# 企業バイアス分析ダッシュボード「分析サマリー」設計書

## 1. 目的・背景
- 企業バイアス分析ダッシュボードにおいて、膨大な分析データから主要な傾向や注目点を一目で把握できる「分析サマリー」機能を新設する。
- これにより、ユーザーは個別データの詳細分析に加え、全体傾向や異常値、注目カテゴリを迅速に把握可能となる。
- また、Google SERP表記を「Google Custom Search」に統一し、比較指標の明確化・UI/コメントの一貫性を図る。

## 2. 新機能概要
- サイドバーまたはトップに「分析サマリー」タブ/セクションを追加。
- 最新データや全データから主要指標（バイアス指標、ランキング類似度、公式/非公式比率等）を自動抽出し、グラフ・表・テキストで表示。
- 異常値や大きな変動を自動検出し、注目点として強調表示。
- Google Custom SearchとPerplexityの比較指標もサマリー内で可視化。

## 3. データ構造・取得方法
- corporate_bias_datasets/integrated/配下の日付ディレクトリ（例: 20250702, 20250624 など）から最新のJSON/CSVデータを取得。
- データは「カテゴリ→サブカテゴリ→サービス/指標」等の多層構造。
- ファイル名・ディレクトリ名から日付・データタイプ・カテゴリ等を判別。
- 主要な分析ファイルは bias_analysis_results.json, corporate_bias_dataset.json など。
- S3やresults/配下の参照は廃止し、integrated配下のみを利用する。
- サマリー・詳細分析・画像指標の各セクションはintegrated配下のデータ構造・命名規則に準拠する。

## 4. 主要指標一覧
- バイアス指標（カテゴリ別・サービス別）
- 感情スコア（平均・分布・変動）
- ランキング類似度（RBO, Kendall Tau, Overlap Ratio等）
- 公式/非公式比率、ポジ/ネガ比率
- データ件数・カバレッジ状況
- 異常値・大きな変動（自動抽出）

## 5. UI設計
- サイドバーまたはトップに「分析サマリー」タブ/ページを追加
- サマリー内で主要指標をグラフ・表・テキストで表示
- 異常値や注目点は色やアイコンで強調
- 「詳細を見る」ボタンから該当カテゴリ・サービスの詳細分析にジャンプ
- Google Custom Search/Perplexity比較もサマリー内で可視化

## 6. 内部処理フロー
1. S3から最新データファイルを取得
2. 各カテゴリ・サービスごとに主要指標を抽出
3. 必要に応じて過去データと比較し、変動や傾向を算出
4. 異常値や注目点を自動抽出（閾値・統計的手法等）
5. サマリー用データを整形し、UIに渡す

## 7. Google Custom Search対応
- 旧「Google SERP」表記はすべて「Google Custom Search」に統一
- コード・UI・コメント・変数名等も一貫して修正
- Google Custom Search APIから取得したデータをPerplexityデータと同様に扱い、比較指標を算出

## 8. 今後の拡張方針
- サマリー指標の拡充（例：時系列変化の自動検出、AIによる注目点要約等）
- ユーザーごとのカスタマイズサマリー
- サマリーから直接レポート出力・エクスポート機能
- CI/CD自動テストへのサマリー検証追加

---

※本設計書は{dynamic_date}時点のドラフトです。実装・運用状況に応じて随時更新します。